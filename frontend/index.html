<!DOCTYPE html>
<html lang="ko">
	<head>
		<meta charset="UTF-8" />
		<link rel="icon" type="image/svg+xml" href="/new-favicon.ico" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<base href="/" />
		<title>쉐어드레스</title>
		<!-- Google Tag Manager -->
		<script>
			(function (w, d, s, l, i) {
				w[l] = w[l] || [];
				w[l].push({ 'gtm.start': new Date().getTime(), event: 'gtm.js' });
				var f = d.getElementsByTagName(s)[0],
					j = d.createElement(s),
					dl = l != 'dataLayer' ? '&l=' + l : '';
				j.async = true;
				j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
				f.parentNode.insertBefore(j, f);
			})(window, document, 'script', 'dataLayer', 'GTM-TRK74ZT2');
		</script>
		<!-- End Google Tag Manager -->
	</head>
	<body>
		<!-- Google Tag Manager (noscript) -->
		<noscript>
			<iframe
				src="https://www.googletagmanager.com/ns.html?id=GTM-TRK74ZT2"
				height="0"
				width="0"
				style="display: none; visibility: hidden"
			></iframe>
		</noscript>
		<!-- End Google Tag Manager (noscript) -->
		<div id="root"></div>
		<script type="module" src="/src/main.tsx"></script>
		<script>
			if ('serviceWorker' in navigator) {
				window.addEventListener('load', async () => {
					try {
						// PWA 서비스 워커 등록
						const pwaRegistration = await navigator.serviceWorker.register(
							'/sw.js',
							{
								scope: '/',
							},
						);
						console.log('PWA Service Worker registered:', pwaRegistration);

						// FCM 서비스 워커 등록
						const fcmRegistration = await navigator.serviceWorker.register(
							'/firebase-messaging-sw.js',
							{
								scope: '/',
							},
						);
						console.log('FCM Service Worker registered:', fcmRegistration);
					} catch (error) {
						console.error('Service Worker registration failed:', error);
					}
				});
			}
		</script>
	</body>
</html>
